### 索引
索引的出现是为了提高数据查询的效率    

在查询的时候要尽量少读磁盘，必须让查询过程访问尽量少的数据块，所以不应该使用二叉树，要使用`多叉`树   

索引是在 `存储引擎层` 实现的, 索引分为`主键索引`与`非主键索引`，主键索引的叶子节点存的是整行数据，非主键索引的叶子节点存储的是主键的值   

### 普通索引与唯一索引的选择？？  
普通索引和惟一索引在查询能力上是没差别的，主要考虑的是对更新性能的影响。一般尽量选择普通索引。  



### B 树
- B 树可以理解为一个节点可以拥有多于2个子节点的多叉查找树   
- B 树中同一键值不会出现多次，要么在叶子节点，要么在内节点

B树的缺点：  
每个节点都包含 key 值和 value 值，如果 value 比较大，每一页存储的 key 会比较少，当数据比较多，出出现经历多层节点才能查询到数据   
 

### B+ 树
与 B树的不同: 

 - 所有叶子节点包含了全部关键字的信息
 - 各叶子节点用指针连接
 - 非叶子节点只存储 key 的信息， 相对 B树，可以增加每一页中存储 key 的数量
 - B+ 树的键一定会出现在叶子节点，同时也可能在非叶子节点中重复出现。 B 树中同一键值不会出现多次


### B+ 树索引
B+ 树索引并不能找到一个给定键值的具体行，B+ 树索引只能知道被查找数据行所在的页，把页读入缓冲池中，在内存中通过二分查找进行查找，找到需要的数据

#### 聚蔟索引（主键索引）
主键索引的叶子节点存的是整行数据。在 InnoDB 里，主键索引也被称为聚簇索引。

#### 非聚蔟索引（辅助索引）
非主键索引的叶子节点内容是主键的值。在 InnoDB 里， 非主键索引页被称为二级索引。

基于主键索引和普通索引的区别？
> select * from T where ID = 500  

ID 是主键，通过这种主键查询方式，只需要搜索 ID 这棵 B+ 树

> select * from T where k = 5

k 是非主键，即普通索引查询，先搜索 k 索引树，得到 ID 为 500， 再到 ID 索引树搜索一次，这个过程称为回表。


### 字符串创建索引的场景
- 直接创建完整索引，这样可能比较占用空间
- 创建前缀索引，节省空间，但会增加查询扫描次数，并且不能使用覆盖索引
- 倒序存储，再创建前缀索引，用于绕过字符串本身前缀区分度不够的问题，例如：身份证
- 创建 hash 字段索引，查询性能稳定，有额外的存储和计算消耗，跟第三种方式一样，不支持范围扫描

### explain 获取到的预计扫描行数(rows) 和实际相差较大的解决方法  
使用 `analyze table t`命令,可以用来重新统计索引信息   

